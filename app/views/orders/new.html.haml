.container.mx-auto.p-4
    .flex.flex-col.lg:flex-row.gap-8
        %div{class: "lg:w-2/3"}
            %h2.text-2xl.font-bold.mb-6.mt-8 Shipping Address
            =form_with model: @order, local:true, class: "space-y-4" do |f|
                -unless user_signed_in?
                    %div
                        =f.label :email, class: "block text-sm font-medium text-gray-700 mb-1"
                        =f.text_field :email, class: "w-full px-3 py-2 border border-gray-300 rounded-mdshadow-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                %div
                    =f.label :city, class: "block text-sm font-medium text-gray-700 mb-1"
                    =f.text_field :city, class: "w-full px-3 py-2 border border-gray-300 rounded-mdshadow-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                %div
                    =f.label :province, class: "block text-sm font-medium text-gray-700 mb-1"
                    =f.text_field :province, class: "w-full px-3 py-2 border border-gray-300 rounded-mdshadow-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                %div
                    =f.label :barangay, class: "block text-sm font-medium text-gray-700 mb-1"
                    =f.text_field :barangay, class: "w-full px-3 py-2 border border-gray-300 rounded-mdshadow-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                %div
                    =f.label :zip_code, class: "block text-sm font-medium text-gray-700 mb-1"
                    =f.number_field :zip_code, class: "w-full px-3 py-2 border border-gray-300 rounded-mdshadow-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                %div.grid.grid-cols-2.gap-4
                    %div
                        =f.label :street, class: "block text-sm font-medium text-gray-700 mb-1"
                        =f.text_field :street, class: "w-full px-3 py-2 border border-gray-300 rounded-mdshadow-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"
                    %div
                        =f.label :house_number, class: "block text-sm font-medium text-gray-700 mb-1"
                        =f.number_field :house_number, class: "w-full px-3 py-2 border border-gray-300 rounded-mdshadow-sm placeholder-gray-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500"

                        =f.submit "Place Order", class: "btn-cta"
        %div{class: "lg:w-1/3"}
            .card-wrapper
                %h2.text-2xl.font-bold.mb-6 Order Summary
                .space-y-4 
                    -current_cart.cart_items.each do |ci|
                        -if ci.product.product_image.attached?
                            .flex.items-center.justify-between
                                .flex.items-center.space-x-4
                                    =image_tag(ci.product.product_image, class: "w-16 h-16 object-cover rounded")
                                    %div
                                        %h3.font-semibold 
                                            =ci.product.name
                                %span.font-semibold
                                    =ci.product.price
                    %hr
                    .flex.justify-between.items-center.text-xl.font-bold
                        %span Total:
                        =current_cart.total
